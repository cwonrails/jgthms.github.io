<!doctype html>
<html>
	<head>
		<meta charset="utf-8"> 
		<title>{{ page.title }}</title>
    <meta name="author" content="J. Thomas">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="/style.css" type="text/css">
    <link rel="alternate" href="/atom.xml" type="application/atom+xml" title="jgthms">
		<link rel="icon" href="/jt.ico">
	</head>
  <body>
    <header>
      <a id="logo" href="/">
        <strong>JT</strong>
        <em>Thoughts of a retired designer</em>
      </a>
    </header>
    {{ content }}
    <div style="clear: both;"></div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
    $(document).ready(function(){

      var test = $('#test');
      var viewer = $('#viewer');
      var images = $('#viewer img');
      var links = $('#portfolio ul li a');
      var position = viewer.offset();
      var count = images.size();
      var i = 0;

      function Display(i) {
        images.hide();
        images.eq(i).show();
        links.removeClass('on');
        links.eq(i).addClass('on');
        link = links.eq(i).attr('href');
        viewer.attr('href', link);
      }

      viewer.mousemove( function(e) {
        var x = e.pageX - position.left;
        var n = Math.round(x * (count - 1) / 220);
        clearInterval(timer);
        Display(n);
      });

      links.hover( function(){
        current = links.index(this);
        clearInterval(timer);
        Display(current);
      });

      timer = setInterval( function() {
        i = (i + 1) % count;
        Display(i);
      }, 3000);

      R = function(s) {
          return R13(R5(s));
      }

      R5 = function(s) {
        var b = [],c,i = s.length,a = '0'.charCodeAt(),z = a + 10;
        while (i--) { 
          c = s.charCodeAt(i);
          if (c >= a && c < z) { b[i] = String.fromCharCode(((c - a + 5) % (10)) + a); }
          else { b[i] = s.charAt(i); }
        }
        return b.join('');
      }

      R13 = function(s) {
        var b = [],c,i = s.length,a = 'a'.charCodeAt(),z = a + 26,A = 'A'.charCodeAt(),Z = A + 26;
        while (i--) {
          c = s.charCodeAt(i);
          if (c >= a && c < z) { b[i] = String.fromCharCode(((c - a + 13) % (26)) + a); }
          else if (c >= A && c < Z) { b[i] = String.fromCharCode(((c - A + 13) % (26)) + A); }
          else { b[i] = s.charAt(i); }
        }
        return b.join('');
      }
      
      var c = $('#c');
      var t = 'znvygb:'
      var m = 'ookqrfvta@tznvy.pbz';
      var a = $('<a/>', {
        href: R(t+m),
        title: 'Contact me',
        text: R(m)
      });
      c.attr('title', R(t+m));
      c.attr('href', R(t+m));
        
    });
    </script>
	</body>
</html>
